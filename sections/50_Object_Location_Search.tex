\section{Object-Location Search}
\label{section:loc_search}


\begin{algorithm}[H]
    \caption{Generating Location Centric Structure}\label{alg:locationCentricGeneration}
    \begin{algorithmic}
        \State{\textit{\textbf{T} a Location Table with ID, Name, Lat \& Long of its objects}}
        \State{\textit{\textbf{X} a (x,y) tuple of the centroid for the location}}
        \State{- - - - -}
        \Procedure{MakeLocationCentricStructure}{$T$,$X$}
            \State{$D$\{$NW$:[], $NE$:[], $SW$:[], $SE$:[]\}}\Comment{Dictionary}
            \For{$R$ in $T$}\Comment{R is a row describing a single object}
                \If{$R.y$ < $X.y$}
                    \If{$R.x$ <= $X.x$}
                        \State{Add $R.Name$ to $D.SW$}
                    \Else
                        \State{Add $R.Name$ to $D.SE$}
                    \EndIf
                \Else
                    \If{$R.x$ <= $X.x$} 
                        \State{Add $R.Name$ to $D.NW$}
                    \Else
                        \State{Add $R.Name$ to $D.NE$}
                    \EndIf
                \EndIf 
            \EndFor
            \State{\textbf{return} $D$}
        \EndProcedure
    \end{algorithmic}
\end{algorithm}


\nrscomment{this needs to be written based on how it's implemented.}

\nrscomment{Generalize makeLocationCentricStructure to use it for query and data, then do set intersections to get num matches?}

\nrscomment{Return ranked set of locations as output}
\begin{algorithm}
    \caption{Location-Object Search}\label{alg:locSearch}
    \begin{algorithmic}
        \State{\textit{\textbf{Q} A pictorial query specified as (x,y) coords in a canvas C}}
        \State{\textit{\textbf{C} Canvas containing query points}}
        \State{\textit{\textbf{($\bar{x}$,$\bar{y}$)} Midpoint of C, representing position of Location}}
        \State{- - - - -}
        \Procedure{objectLocationSearch}{$Q$,$C$} %\Comment{$M$ a matrix of a Loc's objects, $L$ an ordered list of objects to search for, $D$ is the pruning direction}
            \State{$D \leftarrow$ makeLocationCentricStructure($T$,$X$)}  \nrscomment{how to get T and X}
            \State{$matches \leftarrow$ 0}
            \For{Each point $P$ in $Q$}
                \If{$D$ contains $P$ matching in same quadrant as $Q$}
                    \State{$matches \leftarrow matches$ + 1}               
                \EndIf
            \EndFor
            \State{\textbf{return} $matches$}
        \EndProcedure
    \end{algorithmic}
\end{algorithm}

